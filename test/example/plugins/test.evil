plugin 'Delicious' do |p|
  p.description 'Include links from your delicious account'
  p.http.base_uri 'https://api.del.icio.us/v1'
  
  p.configure do |c|
    c.text :username
    c.password :password
  end
  
  p.setup do
    p.http.basic_auth p.config[:username], p.config[:password]
  end
  
  p.tag :recent do |args|
    resp = p.http.get('/posts/recent', :query => args)
    posts = resp['posts']['post'].is_a?(Hash) ?
              [resp['posts']['post']] : resp['posts']['post']
    
    posts.collect do |link|
      body :link => link
    end
  end
end